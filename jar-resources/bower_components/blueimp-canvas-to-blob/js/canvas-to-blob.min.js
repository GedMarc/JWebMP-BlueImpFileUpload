(function(d){var e=d.HTMLCanvasElement&&d.HTMLCanvasElement.prototype;var c=d.Blob&&(function(){try{return Boolean(new Blob())}catch(h){return false}})();var f=c&&d.Uint8Array&&(function(){try{return new Blob([new Uint8Array(100)]).size===100}catch(h){return false}})();var b=d.BlobBuilder||d.WebKitBlobBuilder||d.MozBlobBuilder||d.MSBlobBuilder;var g=/^data:((.*?)(;charset=.*?)?)(;base64)?,/;var a=(c||b)&&d.atob&&d.ArrayBuffer&&d.Uint8Array&&function(k){var m,r,h,n,j,o,q,l,p;m=k.match(g);if(!m){throw new Error("invalid data URI")}r=m[2]?m[1]:"text/plain"+(m[3]||";charset=US-ASCII");h=!!m[4];n=k.slice(m[0].length);if(h){j=atob(n)}else{j=decodeURIComponent(n)}o=new ArrayBuffer(j.length);q=new Uint8Array(o);for(l=0;l<j.length;l+=1){q[l]=j.charCodeAt(l)}if(c){return new Blob([f?q:o],{type:r})}p=new b();p.append(o);return p.getBlob(r)};if(d.HTMLCanvasElement&&!e.toBlob){if(e.mozGetAsFile){e.toBlob=function(k,i,j){var h=this;setTimeout(function(){if(j&&e.toDataURL&&a){k(a(h.toDataURL(i,j)))}else{k(h.mozGetAsFile("blob",i))}})}}else{if(e.toDataURL&&a){e.toBlob=function(k,i,j){var h=this;setTimeout(function(){k(a(h.toDataURL(i,j)))})}}}}if(typeof define==="function"&&define.amd){define(function(){return a})}else{if(typeof module==="object"&&module.exports){module.exports=a}else{d.dataURLtoBlob=a}}})(window);