(function(b){function d(h,i,g){var e=document.createElement("img");var f;e.onerror=function(j){return d.onerror(e,j,h,i,g)};e.onload=function(j){return d.onload(e,j,h,i,g)};if(typeof h==="string"){d.fetchBlob(h,function(j){if(j){h=j;f=d.createObjectURL(h)}else{f=h;if(g&&g.crossOrigin){e.crossOrigin=g.crossOrigin}}e.src=f},g);return e}else{if(d.isInstanceOf("Blob",h)||d.isInstanceOf("File",h)){f=e._objectURL=d.createObjectURL(h);if(f){e.src=f;return e}return d.readFile(h,function(k){var j=k.target;if(j&&j.result){e.src=j.result}else{if(i){i(k)}}})}}}var a=(b.createObjectURL&&b)||(b.URL&&URL.revokeObjectURL&&URL)||(b.webkitURL&&webkitURL);function c(e,f){if(e._objectURL&&!(f&&f.noRevoke)){d.revokeObjectURL(e._objectURL);delete e._objectURL}}d.fetchBlob=function(f,g,e){g()};d.isInstanceOf=function(e,f){return Object.prototype.toString.call(f)==="[object "+e+"]"};d.transform=function(e,f,i,g,h){i(e,h)};d.onerror=function(e,h,g,i,f){c(e,f);if(i){i.call(e,h)}};d.onload=function(e,h,g,i,f){c(e,f);if(i){d.transform(e,f,i,g,{})}};d.createObjectURL=function(e){return a?a.createObjectURL(e):false};d.revokeObjectURL=function(e){return a?a.revokeObjectURL(e):false};d.readFile=function(f,h,g){if(b.FileReader){var e=new FileReader();e.onload=e.onerror=h;g=g||"readAsDataURL";if(e[g]){e[g](f);return e}}return false};if(typeof define==="function"&&define.amd){define(function(){return d})}else{if(typeof module==="object"&&module.exports){module.exports=d}else{b.loadImage=d}}}(this));