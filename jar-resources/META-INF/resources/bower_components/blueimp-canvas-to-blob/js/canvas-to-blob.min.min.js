(function(m){var l=m.HTMLCanvasElement&&m.HTMLCanvasElement.prototype;var n=m.Blob&&(function(){try{return Boolean(new Blob())}catch(a){return false}})();var k=n&&m.Uint8Array&&(function(){try{return new Blob([new Uint8Array(100)]).size===100}catch(a){return false}})();var h=m.BlobBuilder||m.WebKitBlobBuilder||m.MozBlobBuilder||m.MSBlobBuilder;var j=/^data:((.*?)(;charset=.*?)?)(;base64)?,/;var i=(n||h)&&m.atob&&m.ArrayBuffer&&m.Uint8Array&&function(s){var f,a,u,e,t,d,b,g,c;f=s.match(j);if(!f){throw new Error("invalid data URI")}a=f[2]?f[1]:"text/plain"+(f[3]||";charset=US-ASCII");u=!!f[4];e=s.slice(f[0].length);if(u){t=atob(e)}else{t=decodeURIComponent(e)}d=new ArrayBuffer(t.length);b=new Uint8Array(d);for(g=0;g<t.length;g+=1){b[g]=t.charCodeAt(g)}if(n){return new Blob([k?b:d],{type:a})}c=new h();c.append(d);return c.getBlob(a)};if(m.HTMLCanvasElement&&!l.toBlob){if(l.mozGetAsFile){l.toBlob=function(a,c,b){var d=this;setTimeout(function(){if(b&&l.toDataURL&&i){a(i(d.toDataURL(c,b)))}else{a(d.mozGetAsFile("blob",c))}})}}else{if(l.toDataURL&&i){l.toBlob=function(a,c,b){var d=this;setTimeout(function(){a(i(d.toDataURL(c,b)))})}}}}if(typeof define==="function"&&define.amd){define(function(){return i})}else{if(typeof module==="object"&&module.exports){module.exports=i}else{m.dataURLtoBlob=i}}})(window);